<style>
    .gantt-chart-container {
        overflow-x: auto;
        position: relative;
        border: 1px solid #eee;
        border-radius: 4px;
        margin-top: 10px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .gantt-header, .gantt-row {
        display: flex;
        min-width: 1200px;
    }

    .gantt-header {
        background-color: #f9f9f9;
        border-bottom: 2px solid #e0e0e0;
    }

    .gantt-header-title, .gantt-row-title {
        flex: 0 0 200px;
        padding: 10px;
        background-color: #f5f5f5;
        border-right: 1px solid #ddd;
        font-weight: bold;
    }

    .gantt-row-title {
        display: flex;
        align-items: flex-start;
        padding-top: 15px;
        height: 100%;
        border-bottom: 1px solid #eee;
        background-color: #fdfdfd;
    }

    .gantt-header-timeline {
        flex: 1;
        position: relative;
        border-bottom: 1px solid #eee;
    }

    .gantt-row-timeline {
        flex: 1;
        position: relative;
        min-height: 50px;
        border-bottom: 1px solid #eee;
    }

    .gantt-row-timeline {
        min-height: 140px;
        background-image: linear-gradient(90deg, rgba(0, 0, 0, 0.02) 1px, transparent 1px);
        background-size: calc(100% / 15) 100%;
    }

    .gantt-timeline-scale {
        display: flex;
        border-bottom: 1px solid #ddd;
        background-color: #f9f9f9;
        height: 40px;
    }

    .gantt-timeline-cell {
        flex: 1;
        text-align: center;
        padding: 10px 5px;
        border-right: 1px solid #eee;
        font-size: 12px;
        color: #555;
        font-weight: 500;
    }

    .gantt-task {
        position: absolute;
        height: 30px;
        border-radius: 4px;
        background-color: #f8f8f8;
        border: 1px solid #ddd;
        box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        z-index: 1;
        margin-right: 4px;
        min-width: 80px;
        transition: box-shadow 0.2s ease, transform 0.2s ease;
    }

    .gantt-task:hover {
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.15);
        transform: translateY(-1px);
        z-index: 2;
    }

    .gantt-task-progress {
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0.8;
    }

    .gantt-task-content {
        position: relative;
        z-index: 1;
        padding: 5px 8px;
        font-size: 12px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-weight: 500;
        text-shadow: 0px 0px 2px rgba(255, 255, 255, 0.7);
    }

    .gantt-task .delete-icon {
        position: absolute;
        right: 4px;
        top: 50%;
        transform: translateY(-50%);
        visibility: hidden;
        cursor: pointer;
        z-index: 3;
    }

    .gantt-task:hover .delete-icon {
        visibility: visible;
    }
</style>

<div class="row">
  <div class="col-md-12">
    <h2>{{ 'settings.dashboard.title' | translate }}</h2>
    <p class="text-muted">{{ 'settings.dashboard.subtitle' | translate }}</p>
  </div>
</div>

<div class="row" ng-if="isGanttVisible">
  <div class="col-md-12">
    <div ng-if="isLoading" class="text-center">
      <span class="fas fa-spinner fa-spin"></span> {{ 'settings.dashboard.loading' | translate }}
    </div>

    <div ng-if="!isLoading && ganttChart.data.length === 0" class="text-center">
      <p class="text-muted">{{ 'settings.dashboard.no_activities' | translate }}</p>
    </div>

    <div ng-if="!isLoading && ganttChart.data.length > 0" class="gantt-chart-container">
      <div class="gantt-header">
        <div class="gantt-header-title">{{ 'settings.dashboard.user' | translate }}</div>
        <div class="gantt-header-timeline gantt-timeline-scale">
          <div class="gantt-timeline-cell"
               ng-repeat="date in generateTimelineDates(ganttChart.timeScale.from, ganttChart.timeScale.to)">
            {{ date | date:'MM/dd' }}
          </div>
        </div>
      </div>

      <div class="gantt-body">
        <div class="gantt-row" ng-repeat="row in ganttChart.data">
          <div class="gantt-row-title">{{ row.name }}</div>
          <div class="gantt-row-timeline">
            <div class="gantt-task"
                 ng-repeat="task in row.tasks"
                 ng-style="calculateTaskStyle(task, ganttChart.timeScale)">

              <div class="gantt-task-progress"
                   ng-style="{'width': task.progress + '%', 'background-color': task.color}"></div>

              <div class="gantt-task-content">{{ task.name }} ({{ task.progress }}%)</div>

              <span class="fas fa-trash delete-icon"
                    ng-click="removeActivity(task)"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>